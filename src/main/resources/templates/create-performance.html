<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Создать спектакль</title>
</head>
<body>
<h2>Создать новый спектакль</h2>
<form id="createPerformanceForm">
  <label>Название:<br />
    <input type="text" id="title" required />
  </label><br /><br />
  <label>Описание:<br />
    <input type="text" id="description" required />
  </label><br /><br />
  <label>Длительность (минуты):<br />
    <input type="number" id="duration" required />
  </label><br /><br />
  <label>Жанр (ID):<br />
    <input type="number" id="genreId" required />
  </label><br /><br />
  <button type="submit">Создать</button>
</form>

<div id="result"></div>

<script>
  document.getElementById('createPerformanceForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      const data = {
          title: document.getElementById('title').value,
          description: document.getElementById('description').value,
          duration: parseInt(document.getElementById('duration').value),
          genreId: parseInt(document.getElementById('genreId').value)
      };

      try {
          const response = await fetch('/performances/create', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(data)
          });

          if (response.ok) {
              const performanceId = await response.json();
              document.getElementById('result').textContent = 'Спектакль создан с ID: ' + performanceId;
          } else {
              document.getElementById('result').textContent = 'Ошибка при создании спектакля';
          }
      } catch (err) {
          document.getElementById('result').textContent = 'Ошибка: ' + err.message;
      }
  });
</script>
</body>
</html>
